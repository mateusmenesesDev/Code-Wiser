model Resource {
  id        String           @id @default(cuid())
  title     String
  link      String
  type      ResourceTypeEnum
  createdAt DateTime         @default(now())
  updatedAt DateTime         @updatedAt
  projectId String
  project   Project          @relation(fields: [projectId], references: [id])
}

model Milestone {
  id        String   @id @default(cuid())
  title     String
  completed Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  projectId String
  project   Project  @relation(fields: [projectId], references: [id])
}

model Discussion {
  id          String   @id @default(cuid())
  title       String
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  projectId   String
  project     Project  @relation(fields: [projectId], references: [id])
}

model Category {
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
  id              String            @id @default(cuid())
  name            String            @unique
  approved        Boolean           @default(false)
  projects        Project[]
  ProjectTemplate ProjectTemplate[]
}

model Technology {
  id                String           @id @default(cuid())
  name              String           @unique
  projects          Project[]
  approved          Boolean          @default(false)
  ProjectTemplate   ProjectTemplate? @relation(fields: [projectTemplateId], references: [id])
  projectTemplateId String?
}

model Task {
  id          String             @id @default(cuid())
  title       String
  description String
  status      TaskStatusEnum     @default(BACKLOG)
  createdAt   DateTime           @default(now())
  updatedAt   DateTime           @updatedAt
  projectId   String
  project     Project            @relation(fields: [projectId], references: [id])
  assigneeId  String?
  assignee    ProjectEnrollment? @relation(fields: [assigneeId], references: [id])

  ProjectTemplate ProjectTemplate[]
}

model ProjectImage {
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt
  id                String           @id @default(cuid())
  url               String
  projectId         String
  project           Project          @relation(fields: [projectId], references: [id])
  ProjectTemplate   ProjectTemplate? @relation(fields: [projectTemplateId], references: [id])
  projectTemplateId String?
}

model LearningOutcome {
  id                String           @id @default(cuid())
  value             String
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt
  projectId         String
  project           Project          @relation(fields: [projectId], references: [id])
  ProjectTemplate   ProjectTemplate? @relation(fields: [projectTemplateId], references: [id])
  projectTemplateId String?
}

model ProjectTemplate {
  id               String                @id @default(cuid())
  createdAt        DateTime              @default(now())
  updatedAt        DateTime              @updatedAt
  title            String
  description      String
  tasks            Task[]
  minParticipants  Int
  maxParticipants  Int
  credits          Int?
  type             ProjectTypeEnum
  status           ProjectStatusEnum     @default(PENDING)
  difficulty       ProjectDifficultyEnum
  categoryId       String
  category         Category              @relation(fields: [categoryId], references: [id])
  technologies     Technology[]
  learningOutcomes LearningOutcome[]
  images           ProjectImage[]
  authorId         String
  author           User                  @relation(fields: [authorId], references: [id])
  Project          Project[]
}

model Project {
  createdAt         DateTime              @default(now())
  updatedAt         DateTime              @updatedAt
  id                String                @id @default(cuid())
  title             String                @unique
  slug              String                @unique
  description       String
  minParticipants   Int
  maxParticipants   Int
  timeline          String?
  credits           Int?
  type              ProjectTypeEnum
  difficulty        ProjectDifficultyEnum
  resources         Resource[]
  milestones        Milestone[]
  discussions       Discussion[]
  technologies      Technology[]
  learningOutcomes  LearningOutcome[]
  members           ProjectEnrollment[]
  tasks             Task[]
  images            ProjectImage[]
  authorId          String
  author            User                  @relation(fields: [authorId], references: [id])
  categoryId        String
  category          Category              @relation(fields: [categoryId], references: [id])
  ProjectTemplate   ProjectTemplate?      @relation(fields: [projectTemplateId], references: [id])
  projectTemplateId String?
}

model ProjectEnrollment {
  createdAt DateTime                    @default(now())
  updatedAt DateTime                    @updatedAt
  id        String                      @id @default(cuid())
  projectId String
  project   Project                     @relation(fields: [projectId], references: [id])
  userId    String
  user      User                        @relation(fields: [userId], references: [id])
  role      ProjectRoleEnum             @default(MENTEE)
  status    ProjectEnrollmentStatusEnum @default(ACTIVE)
  tasks     Task[]
}
